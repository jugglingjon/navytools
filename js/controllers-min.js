app.controller("chapterController",function(e,t,a){function r(){console.log(e.chapters[e.chapterID].correctPercent)}function n(){var t=0;for(var a in e.chapters[e.chapterID].answered){var n=e.chapters[e.chapterID].answered[a];e.questions[e.chapterID].questions[a].answers[n].correct&&t++}e.chapters[e.chapterID].correctCount=t,e.chapters[e.chapterID].correctPercent=Math.floor(e.chapters[e.chapterID].correctCount/e.questions[e.chapterID].questions.length*100),r(),window.localStorage[i]=JSON.stringify(e.chapters)}function s(t){function a(){$("#search").val("").trigger("keyup"),$("figure").each(function(){var e=$(this).attr("data-id");if($(this).hasClass("video")){$(this).prepend("<span>Figure "+e+"</span> &mdash; "),$(this).wrapInner("<figcaption></figcaption>");var t="media/"+e+".mp4",a=$('<video controls src="'+t+'">');$(this).prepend(a)}else{$(this).attr("data-frames")&&(e+=$(this).attr("data-frames").split(",")[0]),$(this).prepend("<span>Figure "+e+"</span> &mdash; "),$(this).wrapInner("<figcaption></figcaption>");var r="media/"+e+".jpg",n=$('<img src="'+r+'">');$(this).prepend(n)}}),$(".alert-note").each(function(){$(this).prepend("<h5>NOTE</h5>")}),$(".alert-warning").each(function(){$(this).prepend('<h5><i class="icon mdi mdi-warning"></i>WARNING<i class="icon mdi mdi-warning"></i></h5>')}),$(".alert-caution").each(function(){$(this).prepend('<h5><i class="icon mdi mdi-warning"></i>CAUTION<i class="icon mdi mdi-warning"></i></h5>')})}e.chapters=t,n(),e.bookmarkToggle=function(){1==e.chapters[e.chapterID].bookmarked?e.chapters[e.chapterID].bookmarked=!1:e.chapters[e.chapterID].bookmarked=!0,$(".bookmark-toggle-btn").toggleClass("bookmarked"),n()},e.openChapter=function(t){e.chapterID=t,23===e.chapterID?e.translatedChapterID="A1":e.translatedChapterID="A2",e.chapterQuestions=e.questions[t].questions,$(".portal").empty().load(t+".html",function(){for(var t in e.chapters[e.chapterID].answered)$(".quiz").eq(parseInt(t)).find(".quiz-answer").eq(e.chapters[e.chapterID].answered[t]).addClass("selected");a(),r()})},e.selectAnswer=function(t){var a=$(t.target);a.addClass("selected").siblings().removeClass("selected");var r=a.parent().children().index(a),s=a.closest(".quiz").index(".quiz");return e.chapters[e.chapterID].answered||(e.chapters[e.chapterID].answered={}),e.chapters[e.chapterID].answered[s]=r,n(),!1},e.openChapter(e.chapterID)}e.version="0.8",e.numbersToLetters={0:"A",1:"B",2:"C",3:"D"},e.startChapter=1,e.chapterID=e.startChapter;var i="NETCtoolsAlphaChaptersC";a.get("chapterQuestions.json").then(function(t){e.questions=t.data,window.localStorage[i]?s(JSON.parse(window.localStorage[i])):a.get("chapters.json").then(function(e){s(e.data)})}),e.resetData=function(){confirm("This will reset all bookmarks and saved progress, do you want to continue?")&&a.get("chapters.json").then(function(e){$(".quiz-answer").removeClass("selected"),s(e.data)})}});